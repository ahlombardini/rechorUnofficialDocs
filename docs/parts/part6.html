<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Étape 6 - ReCHor Documentation</title>
    <style>
        :root {
            --primary-color: #1976D2;
            --secondary-color: #2196F3;
            --accent-color: #4CAF50;
            --background-color: #f5f5f5;
            --text-color: #333;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            color: var(--text-color);
            background: var(--background-color);
        }

        .header {
            background: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
        }

        .header a {
            color: white;
            text-decoration: none;
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .header a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            text-decoration: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        h2 {
            color: var(--primary-color);
            margin-top: 0;
        }

        .card-title {
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            margin: 0 0 1rem 0;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .class-card, .concept-card {
            background: white;
            padding: 1.5rem;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.2s ease-in-out;
            margin-bottom: 1rem;
        }

        .class-card:hover, .concept-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .card-title {
            margin: 0 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }

        .card-title a {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 1.2rem;
        }

        .card-title a:hover {
            color: var(--secondary-color);
        }

        .class-content, .concept-content {
            font-size: 0.95em;
            color: var(--text-color);
            overflow: auto;
            max-height: 500px;
            padding-right: 1rem;
        }

        .class-content p, .concept-content p {
            margin: 0.5rem 0;
        }

        .class-content pre, .concept-content pre {
            background: var(--background-color);
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .class-grid, .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .class-card .card-title {
            margin: 0;
        }

        .class-card, .concept-card {
            min-height: 100px;
            height: fit-content;
            display: flex;
            flex-direction: column;
            background: white;
            padding: 1.5rem;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .concept-card {
            margin-bottom: 1rem;
        }

        .concept-card:hover, .class-card:hover {
            transform: translateY(-2px);
        }

        .concept-content {
            font-size: 0.95em;
            color: var(--text-color);
            overflow: auto;
            max-height: 300px;
            margin-top: 0.5rem;
        }

        .concept-content p {
            margin: 0.5rem 0;
        }

        .concept-content ol, .concept-content ul {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
        }

        .concept-content a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .concept-content a:hover {
            text-decoration: underline;
        }

        .concepts-section {
            margin: 2rem 0;
        }

        .concepts-section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .class-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .class-card a {
            text-decoration: none;
        }

        .introduction {
            background: white;
            padding: 2rem;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .subtitle {
            font-style: italic;
            color: var(--secondary-color);
            margin: 1rem 0;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 1rem auto;
        }

        figure {
            margin: 2rem 0;
            text-align: center;
        }

        figcaption {
            font-style: italic;
            color: var(--text-color);
            margin-top: 0.5rem;
        }

        .concept-preview {
            color: var(--text-color);
            font-size: 0.9em;
            margin-top: 0.5rem;
            opacity: 0.8;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .concept-card {
            min-height: 100px;
            height: fit-content;
            background: white;
            padding: 1.5rem;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.2s ease-in-out;
        }

        .concept-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .concept-card a {
            text-decoration: none;
            color: inherit;
            display: block;
            height: 100%;
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="../index.html">← Retour à l'index</a>
    </header>
    <div class="container">
        <h2>Étape 6 - Profil et extraction de voyage</h2>
<p class="subtitle">ReCHor – étape 6</p>

            <div class="introduction">
                <div class="outline-text-2" id="text-1">
<p>
Le but de cette sixième étape — la dernière de la première partie du projet — est d'une part de terminer la rédaction des classes représentant l'horaire aplati, et d'autre part d'écrire celles permettant de représenter ce que nous appellerons un <i>profil</i>, et d'en extraire des voyages.
</p>
<div class="cs108warning" id="orga24b9f6">
<p>
Notez que cette étape devra être rendue deux fois :
</p>
<ol class="org-ol">
<li>pour le rendu testé habituel (délai : le <b>28/3</b> à <b>18h00</b>),</li>
<li>pour le rendu intermédiaire (délai : le <b>4/4</b> à <b>18h00</b>).</li>
</ol>
<p>
Le deuxième de ces rendus sera corrigé par lecture du code de vos étapes 1 à 6, et il vous faudra donc soigner sa qualité et sa documentation. Il est fortement conseillé de lire <a href="../g/style.html">notre guide à ce sujet</a>.
</p>
</div>
</div>
            </div>
        
                <div class="concepts-section">
                    <h3>Concepts clés</h3>
                    <div class="concept-grid">
            
        <div class="concept-card">
            <h3 class="card-title">
                <a href="../concepts/part6_mappage_de_fichiers_en_memoire.html">« Mappage » de fichiers en mémoire</a>
            </h3>
            <div class="concept-preview">Les deux étapes précédentes ont été consacrées à la rédaction de classes permettant de manipuler ...</div>
        </div>
    
        <div class="concept-card">
            <h3 class="card-title">
                <a href="../concepts/part6_profil.html">Profil</a>
            </h3>
            <div class="concept-preview">Comme nous le verrons à l'étape suivante, l'algorithme de recherche de voyage optimaux produit en...</div>
        </div>
    
        <div class="concept-card">
            <h3 class="card-title">
                <a href="../concepts/part6_profil_augmente.html">Profil augmenté</a>
            </h3>
            <div class="concept-preview">Un profil contient, pour chaque gare, la frontière de Pareto de tous les voyages optimaux permett...</div>
        </div>
    
        <div class="concept-card">
            <h3 class="card-title">
                <a href="../concepts/part6_extraction_de_voyages.html">Extraction de voyages</a>
            </h3>
            <div class="concept-preview">À eux seuls, les tuples associés à une gare dans un profil ne contiennent pas assez d'information...</div>
        </div>
    
        <div class="concept-card">
            <h3 class="card-title">
                <a href="../concepts/part6_etapes_initiales_et_finales.html">Étapes initiales et finales</a>
            </h3>
            <div class="concept-preview">La technique d'extraction de voyage présentée à la section précédente produit toujours des voyage...</div>
        </div>
    
                    </div>
                </div>
        
                <div class="class-section">
                    <h3>Classes et Interfaces</h3>
                    <div class="class-grid">
        
        <div class="class-card">
            <h3 class="card-title">
                <a href="classes/FileTimeTable.html">FileTimeTable</a>
            </h3>
            <div class="class-content">
                <div class="outline-text-3" id="text-3-1">
<p>
L'enregistrement <code>FileTimeTable</code> du sous-paquetage <code>timetable.mapped</code>, public, implémente l'interface <code>TimeTable</code> et représente un horaire de transport public dont les données (aplaties) sont stockées dans des fichiers. Il possède les attributs suivants :
</p>
<dl class="org-dl">
<dt><code>Path directory</code></dt><dd>le chemin d'accès au dossier contenant les fichiers des données horaires,</dd>
<dt><code>List&lt;String&gt; stringTable</code></dt><dd>la table des chaînes de caractères,</dd>
<dt><code>Stations stations</code></dt><dd>les gares,</dd>
<dt><code>StationAliases stationAliases</code></dt><dd>les noms alternatifs des gares,</dd>
<dt><code>Platforms platforms</code></dt><dd>les voies/quai,</dd>
<dt><code>Routes routes</code></dt><dd>les lignes,</dd>
<dt><code>Transfers transfers</code></dt><dd>les changements.</dd>
</dl>
<p>
<code>FileTimeTable</code> possède une méthode publique et statique facilitant la création d'une instance à partir du chemin d'accès au dossier contenant les données horaires :
</p>
<dl class="org-dl">
<dt><code>TimeTable in(Path directory) throws IOException</code></dt><dd>qui retourne une nouvelle instance de <code>FileTimeTable</code> dont les données aplaties ont été obtenues à partir des fichiers se trouvant dans le dossier dont le chemin d'accès est donné, en faisant l'hypothèse que ce dossier est organisé de la même manière que le dossier <code>timetable</code> de l'archive que nous vous fournissons ; lève une <code>IOException</code> en cas d'erreur d'entrée/sortie.</dd>
</dl>
<p>
En dehors de cette méthode statique, les seules méthodes publiques offertes par <code>FileTimeTable</code> sont des versions concrètes des méthodes abstraites de <code>TimeTable</code>.
</p>
</div>
            </div>
        </div>
    
        <div class="class-card">
            <h3 class="card-title">
                <a href="classes/Profile.html">Profile</a>
            </h3>
            <div class="class-content">
                <div class="outline-text-3" id="text-3-2">
<p>
L'enregistrement <code>Profile</code> du sous-paquetage <code>journey</code>, public et immuable, représente un profil. Il possède les attributs suivants :
</p>
<dl class="org-dl">
<dt><code>TimeTable timeTable</code></dt><dd>l'horaire auquel correspond le profil,</dd>
<dt><code>LocalDate date</code></dt><dd>la date à laquelle correspond le profil,</dd>
<dt><code>int arrStationId</code></dt><dd>l'index de la gare d'arrivée à laquelle correspond le profil,</dd>
<dt><code>List&lt;ParetoFront&gt; stationFront</code></dt><dd>la table des frontières de Pareto de toutes les gares, qui contient, à un index donné, la frontière de la gare de même index.</dd>
</dl>
<p>
Le constructeur compact de <code>Profile</code> copie la table des frontières de Pareto afin de garantir l'immuabilité de la classe.
</p>
<p>
<code>Profile</code> possède les méthodes publiques suivantes :
</p>
<dl class="org-dl">
<dt><code>Connections connections()</code></dt><dd>qui retourne les liaisons correspondant au profil, qui sont simplement celles de l'horaire, à la date à laquelle correspond le profil,</dd>
<dt><code>Trips trips()</code></dt><dd>qui retourne les courses correspondant au profil, qui sont simplement celles de l'horaire, à la date à laquelle correspond le profil,</dd>
<dt><code>ParetoFront forStation(int stationId)</code></dt><dd>qui retourne la frontière de Pareto pour la gare d'index donné, ou lève une <code>IndexOutOfBoundsException</code> si cet index est invalide.</dd>
</dl>
</div>
            </div>
        </div>
    
        <div class="class-card">
            <h3 class="card-title">
                <a href="classes/Profile.Builder.html">Profile.Builder</a>
            </h3>
            <div class="class-content">
                <div class="outline-text-3" id="text-3-3">
<p>
La classe <code>Builder</code>, publique, finale et imbriquée statiquement dans l'enregistrement <code>Profile</code>, représente un bâtisseur de profil. Ce bâtisseur étant destiné à être utilisé lors du calcul des voyages optimaux, il stocke non seulement les frontières de Pareto en cours de construction pour les gares, mais aussi pour les courses. En d'autres termes, il représente un profil <i>augmenté</i> en cours de construction, mais finit par bâtir un profil simple.
</p>
<p>
<code>Builder</code> offre un unique constructeur public :
</p>
<dl class="org-dl">
<dt><code>Builder(TimeTable timeTable, LocalDate date, int arrStationId)</code></dt><dd>qui construit un bâtisseur de profil pour l'horaire, la date et la gare de destination donnés.</dd>
</dl>
<p>
Le constructeur stocke non seulement les arguments qu'on lui a passé dans des attributs, afin de pouvoir les passer plus tard au constructeur de <code>Profile</code>, mais il initialise également deux tableaux primitifs destinés à contenir les bâtisseurs des frontières de Pareto des gares et des courses. Ces tableaux ne doivent <i>pas</i> être remplis initialement, donc leurs éléments doivent tous être <code>null</code>.
</p>
<p>
En plus de ce constructeur, <code>Builder</code> offre les méthodes publiques suivantes :
</p>
<dl class="org-dl">
<dt><code>ParetoFront.Builder forStation(int stationId)</code></dt><dd>qui retourne le bâtisseur de la frontière de Pareto pour la gare d'index donné, qui est <code>null</code> si aucun appel à <code>setForStation</code> n'a été fait précédemment pour cette gare, ou lève une <code>IndexOutOfBoundsException</code> si l'index est invalide,</dd>
<dt><code>void setForStation(int stationId, ParetoFront.Builder builder)</code></dt><dd>qui associe le bâtisseur de frontière de Pareto donné à la gare d'index donné, ou lève une <code>IndexOutOfBoundsException</code> si l'index est invalide,</dd>
<dt><code>ParetoFront.Builder forTrip(int tripId)</code></dt><dd>qui fait la même chose que <code>forStation</code> mais pour la course d'index donné,</dd>
<dt><code>void setForTrip(int tripId, ParetoFront.Builder builder)</code></dt><dd>qui fait la même chose que <code>setForStation</code> mais pour la course d'index donné,</dd>
<dt><code>Profile build()</code></dt><dd>qui retourne le profil simple — sans les frontières de Pareto correspondant aux courses — en cours de construction.</dd>
</dl>
</div>
            </div>
        </div>
    
        <div class="class-card">
            <h3 class="card-title">
                <a href="classes/JourneyExtractor.html">JourneyExtractor</a>
            </h3>
            <div class="class-content">
                <div class="outline-text-3" id="text-3-4">
<p>
La classe <code>JourneyExtractor</code> du sous-paquetage <code>journey</code>, publique et non instanciable, représente un « extracteur de voyages » et contient une seule méthode publique :
</p>
<dl class="org-dl">
<dt><code>List&lt;Journey&gt; journeys(Profile profile, int depStationId)</code></dt><dd>qui retourne la totalité des voyages optimaux correspondant au profil et à la gare de départ donnés, triés d'abord par heure de départ (croissante) puis par heure d'arrivée (croissante).</dd>
</dl>
</div>
            </div>
        </div>
    
                    </div>
                </div>
        
    </div>
</body>
</html>
